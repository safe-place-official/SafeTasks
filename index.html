<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SafeTasks</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header class="app__header">
      <div class="header-brand">
        <div>
          <h1>SafeTasks</h1>
          <p class="tagline">Анти‑прокрастинация в киберпанк‑режиме</p>
        </div>
        <div class="header-badge">
          <span class="label">Сегодня</span>
          <span id="today-date" class="value">--</span>
        </div>
      </div>
      <div class="header-actions">
        <label class="search">
          <span class="sr-only">Поиск</span>
          <input id="global-search" type="search" placeholder="Поиск по задачам, тегам, типам..." />
          <button id="clear-search" class="icon-button" type="button" aria-label="Очистить поиск">✕</button>
        </label>
        <div class="header-controls">
          <button id="theme-toggle" class="btn ghost" type="button">Тема: Ночь</button>
          <div class="user-card">
            <span class="label">Профиль</span>
            <strong>Operator Safe</strong>
            <span class="hint">Личный режим</span>
          </div>
        </div>
      </div>
      <nav class="tabs">
        <button class="tab-button is-active" data-screen="dashboard">Дашборд</button>
        <button class="tab-button" data-screen="daily">Дневные</button>
        <button class="tab-button" data-screen="weekly">Недельные</button>
        <button class="tab-button" data-screen="monthly">Месячные</button>
        <button class="tab-button" data-screen="yearly">Годовые</button>
        <button class="tab-button" data-screen="pomodoro" data-module="pomodoro" id="tab-pomodoro">Помодоро</button>
        <button class="tab-button" data-screen="schedule">Расписание</button>
        <button class="tab-button" data-screen="stats" id="tab-stats">Статистика</button>
        <button class="tab-button" data-screen="intel" data-module="intel" id="tab-intel">Интеллект</button>
        <button class="tab-button" data-screen="modules">Модули</button>
      </nav>
    </header>

    <main>
      <section class="screen is-active" id="screen-dashboard">
        <div class="grid dashboard-grid">
          <section class="card quick-capture">
            <div class="card__header">
              <h2>Быстрый захват</h2>
              <span class="hint">Запиши задачу за 10 секунд</span>
            </div>
            <form id="quick-task-form" class="task-form task-form--compact" data-task-type="daily">
              <div class="form-row">
                <input type="text" class="task-title-input" placeholder="Что нужно сделать?" required />
                <select class="task-type-input">
                  <option value="daily">Дневная</option>
                  <option value="weekly">Недельная</option>
                  <option value="monthly">Месячная</option>
                  <option value="yearly">Годовая</option>
                </select>
              </div>
              <div class="form-row">
                <select class="task-priority-input">
                  <option value="high">Высокий приоритет</option>
                  <option value="medium" selected>Средний приоритет</option>
                  <option value="low">Низкий приоритет</option>
                </select>
                <input type="text" class="task-tags-input" placeholder="Теги через запятую" />
              </div>
              <button type="submit" class="btn">Добавить задачу</button>
            </form>
          </section>

          <section class="card highlights">
            <div class="card__header">
              <h2>Сводка дня</h2>
              <span class="hint">Главные сигналы</span>
            </div>
            <div class="highlight-grid">
              <div>
                <span class="label">Активные задачи</span>
                <span id="active-total" class="value">0</span>
              </div>
              <div>
                <span class="label">На сегодня</span>
                <span id="due-today" class="value">0</span>
              </div>
              <div>
                <span class="label">Просрочено</span>
                <span id="overdue-count" class="value">0</span>
              </div>
              <div>
                <span class="label">Фокус-пульс</span>
                <span id="focus-score" class="value">0%</span>
              </div>
            </div>
          </section>

          <section class="card">
            <div class="card__header">
              <h2>Топ-приоритеты</h2>
              <span class="hint">Срочные и важные</span>
            </div>
            <ul id="priority-list" class="task-list task-list--compact"></ul>
          </section>

          <section class="card">
            <div class="card__header">
              <h2>Ближайшие дедлайны</h2>
              <span class="hint">Следующие 7 дней</span>
            </div>
            <ul id="upcoming-list" class="task-list task-list--compact"></ul>
          </section>

          <section class="card">
            <div class="card__header">
              <h2>Лента активности</h2>
              <span class="hint">Последние достижения</span>
            </div>
            <ul id="activity-list" class="activity-list"></ul>
          </section>

          <section class="card focus-plan">
            <div class="card__header">
              <h2>План фокуса</h2>
              <span class="hint">Как выглядит идеальный день</span>
            </div>
            <div class="focus-plan__content">
              <div>
                <span class="label">Рекомендуемые блоки</span>
                <strong id="focus-blocks">0</strong>
                <p class="hint">Подстрой под текущую загрузку.</p>
              </div>
              <div>
                <span class="label">Лучший тип задач</span>
                <strong id="focus-type">—</strong>
                <p class="hint">Опираясь на активные задачи.</p>
              </div>
              <div>
                <span class="label">Совет от SafeTasks</span>
                <p id="focus-tip" class="hint">Начни день с одной задачи высокого приоритета.</p>
              </div>
            </div>
          </section>
        </div>
      </section>

      <section class="screen" id="screen-daily">
        <div class="task-layout">
          <div class="column">
            <section class="card">
              <h2>Новая дневная задача</h2>
              <form class="task-form" data-task-type="daily">
                <div class="form-row">
                  <input type="text" class="task-title-input" placeholder="Что сделать сегодня?" required />
                  <select class="task-priority-input">
                    <option value="high">Высокий</option>
                    <option value="medium" selected>Средний</option>
                    <option value="low">Низкий</option>
                  </select>
                </div>
                <input type="text" class="task-tags-input" placeholder="Теги через запятую" />
                <button type="submit" class="btn">Добавить</button>
              </form>
              <div class="summary">
                <div>
                  <span class="label">Выполнено</span>
                  <span class="value" data-count="completed" data-type="daily">0</span>
                </div>
                <div>
                  <span class="label">В процессе</span>
                  <span class="value" data-count="pending" data-type="daily">0</span>
                </div>
              </div>
            </section>

          </div>

          <div class="column">
            <section class="card">
              <div class="card__header">
                <h2>Дневные задачи</h2>
                <span class="hint">План на сегодня</span>
              </div>
              <ul id="daily-task-list" class="task-list"></ul>
            </section>
          </div>

          <div class="column">
            <section class="card">
              <div class="card__header">
                <h2>Выполнено</h2>
                <span class="hint">Удаление недоступно</span>
              </div>
              <ul id="daily-completed-list" class="task-list task-list--completed"></ul>
            </section>
          </div>
        </div>
      </section>

      <section class="screen" id="screen-pomodoro" data-module="pomodoro">
        <div class="grid">
          <section class="card pomodoro pomodoro--red">
            <div class="card__header">
              <h2>Pomodoro 25/5</h2>
              <span id="pomodoro-state" class="hint">Фокус</span>
            </div>
            <div class="pomodoro__time" id="pomodoro-time">25:00</div>
            <div class="pomodoro__controls">
              <button id="pomodoro-start" class="btn btn--red">Старт</button>
              <button id="pomodoro-pause" class="btn ghost">Пауза</button>
              <button id="pomodoro-reset" class="btn ghost">Сброс</button>
            </div>
            <div class="progress progress--red">
              <div id="pomodoro-progress" class="progress__bar"></div>
            </div>
          </section>

          <section class="card focus-ritual">
            <div class="card__header">
              <h2>Ритуал фокуса</h2>
              <span class="hint">Запусти сессию правильно</span>
            </div>
            <ul class="checklist">
              <li><label><input type="checkbox" /> Убери уведомления на 25 минут</label></li>
              <li><label><input type="checkbox" /> Подготовь воду и таймер</label></li>
              <li><label><input type="checkbox" /> Запиши одну ключевую задачу</label></li>
              <li><label><input type="checkbox" /> Включи фоновый шум</label></li>
            </ul>
          </section>

          <section class="card focus-note">
            <div class="card__header">
              <h2>Фокус-заметка</h2>
              <span class="hint">Коротко: что важно сейчас</span>
            </div>
            <textarea rows="6" placeholder="Например: закрыть задачу по лендингу за 2 помодоро."></textarea>
            <p class="hint">Не хранится в браузере — используй как быстрый черновик.</p>
          </section>
        </div>
      </section>

      <section class="screen" id="screen-weekly">
        <div class="task-layout">
          <div class="column">
            <section class="card">
              <h2>Новая недельная задача</h2>
              <form class="task-form" data-task-type="weekly">
                <div class="form-row">
                  <input type="text" class="task-title-input" placeholder="Что важно на этой неделе?" required />
                  <select class="task-priority-input">
                    <option value="high">Высокий</option>
                    <option value="medium" selected>Средний</option>
                    <option value="low">Низкий</option>
                  </select>
                </div>
                <input type="text" class="task-tags-input" placeholder="Теги через запятую" />
                <button type="submit" class="btn">Добавить</button>
              </form>
              <div class="summary">
                <div>
                  <span class="label">Выполнено</span>
                  <span class="value" data-count="completed" data-type="weekly">0</span>
                </div>
                <div>
                  <span class="label">В процессе</span>
                  <span class="value" data-count="pending" data-type="weekly">0</span>
                </div>
              </div>
            </section>
          </div>

          <div class="column">
            <section class="card">
              <div class="card__header">
                <h2>Недельные задачи</h2>
                <span class="hint">Фокус недели</span>
              </div>
              <ul id="weekly-task-list" class="task-list"></ul>
            </section>
          </div>

          <div class="column">
            <section class="card">
              <div class="card__header">
                <h2>Выполнено</h2>
                <span class="hint">Удаление недоступно</span>
              </div>
              <ul id="weekly-completed-list" class="task-list task-list--completed"></ul>
            </section>
          </div>
        </div>
      </section>

      <section class="screen" id="screen-monthly">
        <div class="task-layout">
          <div class="column">
            <section class="card">
              <h2>Новая месячная задача</h2>
              <form class="task-form" data-task-type="monthly">
                <div class="form-row">
                  <input type="text" class="task-title-input" placeholder="План на месяц" required />
                  <select class="task-priority-input">
                    <option value="high">Высокий</option>
                    <option value="medium" selected>Средний</option>
                    <option value="low">Низкий</option>
                  </select>
                </div>
                <input type="text" class="task-tags-input" placeholder="Теги через запятую" />
                <button type="submit" class="btn">Добавить</button>
              </form>
              <div class="summary">
                <div>
                  <span class="label">Выполнено</span>
                  <span class="value" data-count="completed" data-type="monthly">0</span>
                </div>
                <div>
                  <span class="label">В процессе</span>
                  <span class="value" data-count="pending" data-type="monthly">0</span>
                </div>
              </div>
            </section>
          </div>

          <div class="column">
            <section class="card">
              <div class="card__header">
                <h2>Месячные задачи</h2>
                <span class="hint">Стратегия месяца</span>
              </div>
              <ul id="monthly-task-list" class="task-list"></ul>
            </section>
          </div>

          <div class="column">
            <section class="card">
              <div class="card__header">
                <h2>Выполнено</h2>
                <span class="hint">Удаление недоступно</span>
              </div>
              <ul id="monthly-completed-list" class="task-list task-list--completed"></ul>
            </section>
          </div>
        </div>
      </section>

      <section class="screen" id="screen-yearly">
        <div class="task-layout">
          <div class="column">
            <section class="card">
              <h2>Новая годовая задача</h2>
              <form class="task-form" data-task-type="yearly">
                <div class="form-row">
                  <input type="text" class="task-title-input" placeholder="К чему идти весь год?" required />
                  <select class="task-priority-input">
                    <option value="high">Высокий</option>
                    <option value="medium" selected>Средний</option>
                    <option value="low">Низкий</option>
                  </select>
                </div>
                <input type="text" class="task-tags-input" placeholder="Теги через запятую" />
                <button type="submit" class="btn">Добавить</button>
              </form>
              <div class="summary">
                <div>
                  <span class="label">Выполнено</span>
                  <span class="value" data-count="completed" data-type="yearly">0</span>
                </div>
                <div>
                  <span class="label">В процессе</span>
                  <span class="value" data-count="pending" data-type="yearly">0</span>
                </div>
              </div>
            </section>
          </div>

          <div class="column">
            <section class="card">
              <div class="card__header">
                <h2>Годовые задачи</h2>
                <span class="hint">Большие цели</span>
              </div>
              <ul id="yearly-task-list" class="task-list"></ul>
            </section>
          </div>

          <div class="column">
            <section class="card">
              <div class="card__header">
                <h2>Выполнено</h2>
                <span class="hint">Удаление недоступно</span>
              </div>
              <ul id="yearly-completed-list" class="task-list task-list--completed"></ul>
            </section>
          </div>
        </div>
      </section>

      <section class="screen" id="screen-schedule">
        <div class="grid">
          <section class="card">
            <h2>Свое расписание на неделю</h2>
            <form id="schedule-form" class="schedule-form">
              <label>
                <span class="label">День недели</span>
                <select id="schedule-day" required>
                  <option value="Понедельник">Понедельник</option>
                  <option value="Вторник">Вторник</option>
                  <option value="Среда">Среда</option>
                  <option value="Четверг">Четверг</option>
                  <option value="Пятница">Пятница</option>
                  <option value="Суббота">Суббота</option>
                  <option value="Воскресенье">Воскресенье</option>
                </select>
              </label>
              <label>
                <span class="label">Время</span>
                <input type="time" id="schedule-time" required />
              </label>
              <label>
                <span class="label">Место</span>
                <input type="text" id="schedule-place" placeholder="Где это будет?" required />
              </label>
              <label>
                <span class="label">Задача</span>
                <input type="text" id="schedule-task" placeholder="Что запланировано?" required />
              </label>
              <button type="submit" class="btn">Добавить</button>
            </form>
          </section>

          <section class="card">
            <div class="card__header">
              <h2>План недели</h2>
              <span class="hint">Персональные блоки времени</span>
            </div>
            <ul id="schedule-list" class="schedule-list"></ul>
          </section>
        </div>
      </section>

      <section class="screen" id="screen-stats">
        <div class="grid">
          <section class="card" data-module="stats">
            <h2>Статистика</h2>
            <div class="stats-row">
              <div>
                <span class="label">Streak (дни)</span>
                <span id="streak-count" class="value">0</span>
              </div>
              <div>
                <span class="label">Процент выполнения</span>
                <span id="completion-rate" class="value">0%</span>
              </div>
              <div>
                <label class="label" for="period-select">Период</label>
                <select id="period-select">
                  <option value="7">7 дней</option>
                  <option value="30" selected>30 дней</option>
                  <option value="90">90 дней</option>
                </select>
              </div>
            </div>
            <div class="chart">
              <h3>Выполненные задачи по дням</h3>
              <canvas id="daily-chart" width="600" height="220"></canvas>
            </div>
            <div class="chart">
              <h3>Продуктивность по неделям</h3>
              <canvas id="weekly-chart" width="600" height="220"></canvas>
            </div>
          </section>

          <section class="card" data-module="xp">
            <div class="card__header">
              <h2>XP и уровни</h2>
              <span class="hint">Только мотивация, без преимуществ</span>
            </div>
            <div class="xp-grid">
              <div>
                <span class="label">Текущий уровень</span>
                <span id="xp-level" class="value">0</span>
              </div>
              <div>
                <span class="label">Текущий XP</span>
                <span id="xp-total" class="value">0</span>
              </div>
              <div>
                <span class="label">До следующего уровня</span>
                <span id="xp-next" class="value">500 XP</span>
              </div>
            </div>
            <div class="progress xp-progress">
              <div id="xp-progress-bar" class="progress__bar"></div>
            </div>
            <p class="hint">XP начисляется за закрытые задачи: дневные +10, недельные +30, месячные +100.</p>
          </section>

          <section class="card" data-module="heatmap">
            <div class="card__header">
              <h2>Тепловая карта продуктивности</h2>
              <span class="hint">История закрытых задач по дням</span>
            </div>
            <div id="heatmap-grid" class="heatmap"></div>
            <div class="heatmap-legend">
              <span class="hint">0</span>
              <span class="heatmap-cell level-0"></span>
              <span class="heatmap-cell level-1"></span>
              <span class="heatmap-cell level-2"></span>
              <span class="heatmap-cell level-3"></span>
              <span class="hint">6+</span>
            </div>
          </section>

          <section class="card" data-module="achievements">
            <h2>Достижения</h2>
            <ul id="achievement-list" class="achievement-list"></ul>
          </section>
        </div>
      </section>

      <section class="screen" id="screen-intel" data-module="intel">
        <div class="grid intel-grid">
          <section class="card mission-control">
            <div class="card__header">
              <h2>Mission Control</h2>
              <span class="hint">Цели с прогрессом по тегам</span>
            </div>
            <form id="mission-form" class="mission-form">
              <div class="form-row">
                <input id="mission-title" type="text" placeholder="Название миссии" required />
                <input id="mission-tag" type="text" placeholder="#тег" required />
              </div>
              <div class="form-row">
                <input id="mission-target" type="number" min="1" placeholder="Цель задач" required />
                <input id="mission-date" type="date" required />
              </div>
              <button type="submit" class="btn">Добавить миссию</button>
            </form>
            <ul id="mission-list" class="mission-list"></ul>
          </section>

          <section class="card autopilot">
            <div class="card__header">
              <h2>Автопилот</h2>
              <span class="hint">Подсказки на ближайшие 24 часа</span>
            </div>
            <div class="autopilot-grid">
              <div>
                <span class="label">Индекс нагрузки</span>
                <span id="load-index" class="value">0</span>
                <p id="load-status" class="hint">Загрузка сбалансирована.</p>
              </div>
              <div>
                <span class="label">Риск‑радар</span>
                <span id="risk-count" class="value">0</span>
                <p class="hint">Просроченные и критичные задачи.</p>
              </div>
              <div>
                <span class="label">Фокус‑полоса</span>
                <span id="focus-lane" class="value">—</span>
                <p class="hint">Тип задач с максимальным потенциалом.</p>
              </div>
            </div>
            <div class="autopilot-block">
              <h3>Следующие действия</h3>
              <ul id="autopilot-list" class="task-list task-list--compact"></ul>
            </div>
          </section>

          <section class="card context-map">
            <div class="card__header">
              <h2>Context Map</h2>
              <span class="hint">Топ‑теги и их вес</span>
            </div>
            <div id="context-tags" class="chip-group"></div>
            <p id="context-tip" class="hint">Добавляй теги, чтобы строить фокус‑сессии.</p>
          </section>

          <section class="card energy-planner">
            <div class="card__header">
              <h2>Energy Planner</h2>
              <span class="hint">Слоты энергии для задач</span>
            </div>
            <form id="energy-form" class="energy-form">
              <div class="form-row">
                <select id="energy-period" required>
                  <option value="Утро">Утро</option>
                  <option value="День">День</option>
                  <option value="Вечер">Вечер</option>
                  <option value="Ночь">Ночь</option>
                </select>
                <select id="energy-intensity" required>
                  <option value="Высокая">Высокая энергия</option>
                  <option value="Средняя" selected>Средняя энергия</option>
                  <option value="Низкая">Низкая энергия</option>
                </select>
              </div>
              <div class="form-row">
                <select id="energy-type" required>
                  <option value="Deep">Deep work</option>
                  <option value="Shallow">Рутинные</option>
                  <option value="Creative">Креативные</option>
                </select>
                <input id="energy-note" type="text" placeholder="Заметка (например, только дизайн)" />
              </div>
              <button type="submit" class="btn">Добавить слот</button>
            </form>
            <ul id="energy-list" class="energy-list"></ul>
          </section>

          <section class="card guardrails">
            <div class="card__header">
              <h2>Guardrails</h2>
              <span class="hint">Безопасные ограничения</span>
            </div>
            <div class="guardrail-list">
              <label class="guardrail-toggle">
                <input type="checkbox" data-guardrail="focusLock" />
                <span>Deep‑work lock (блок отвлечений)</span>
              </label>
              <label class="guardrail-toggle">
                <input type="checkbox" data-guardrail="noMeeting" />
                <span>No‑meeting окно 10:00‑12:00</span>
              </label>
              <label class="guardrail-toggle">
                <input type="checkbox" data-guardrail="smartBreaks" />
                <span>Авто‑перерывы каждые 90 минут</span>
              </label>
              <label class="guardrail-toggle">
                <input type="checkbox" data-guardrail="stopAfter9" />
                <span>Блок задач после 21:00</span>
              </label>
            </div>
            <div id="guardrail-status" class="status-stack"></div>
          </section>

          <section class="card idea-vault">
            <div class="card__header">
              <h2>Idea Vault</h2>
              <span class="hint">Инкубатор идей</span>
            </div>
            <form id="idea-form" class="idea-form">
              <input id="idea-input" type="text" placeholder="Схватить идею за 3 секунды" required />
              <button type="submit" class="btn">Сохранить</button>
            </form>
            <ul id="idea-list" class="idea-list"></ul>
          </section>

          <section class="card review">
            <div class="card__header">
              <h2>Weekly Review</h2>
              <span class="hint">Что усилить на следующей неделе</span>
            </div>
            <textarea id="review-input" rows="7" placeholder="Коротко: что сработало, что мешало, 1 эксперимент."></textarea>
            <p class="hint">Сохраняется локально и доступно при следующем запуске.</p>
          </section>
        </div>
      </section>

      <section class="screen" id="screen-modules">
        <div class="grid">
          <section class="card">
            <div class="card__header">
              <h2>Модули SafeTasks</h2>
              <span class="hint">Включай только нужные блоки</span>
            </div>
            <div class="module-list">
              <label class="module-toggle">
                <input type="checkbox" data-module-toggle="pomodoro" />
                <span>Таймер (Pomodoro)</span>
              </label>
              <label class="module-toggle">
                <input type="checkbox" data-module-toggle="xp" />
                <span>XP и уровни</span>
              </label>
              <label class="module-toggle">
                <input type="checkbox" data-module-toggle="achievements" />
                <span>Достижения</span>
              </label>
              <label class="module-toggle">
                <input type="checkbox" data-module-toggle="stats" />
                <span>Статистика</span>
              </label>
              <label class="module-toggle">
                <input type="checkbox" data-module-toggle="heatmap" />
                <span>Тепловая карта</span>
              </label>
              <label class="module-toggle">
                <input type="checkbox" data-module-toggle="intel" />
                <span>Интеллект</span>
              </label>
            </div>
            <p class="hint">Отключённые модули полностью скрываются из интерфейса.</p>
          </section>

          <section class="card">
            <div class="card__header">
              <h2>Экспорт / Импорт данных</h2>
              <span class="hint">Все данные остаются в этом браузере</span>
            </div>
            <div class="data-actions">
              <button id="export-data" class="btn">Экспорт JSON</button>
              <label class="btn ghost">
                Импорт JSON
                <input id="import-data" type="file" accept="application/json" hidden />
              </label>
            </div>
            <p class="hint">Перед импортом появится предупреждение о замене текущих данных.</p>
          </section>
        </div>
      </section>
    </main>

    <footer>
      <span>Created by SafePlace</span>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
